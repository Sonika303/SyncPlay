<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Controller</title>
<style>
body{text-align:center;font-family:Arial;background:#fff}
button{padding:20px;font-size:20px;margin:10px}
</style>
</head>
<body>

<h3 id="status">Connecting…</h3>

<button onclick="send(-6,false)">⬅️</button>
<button onclick="send(6,false)">➡️</button>
<br>
<button onclick="send(0,true)">JUMP</button>
<br>
<button onclick="exit()">Exit</button>

<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
<script>
const u=sessionStorage.getItem("u");
const c=sessionStorage.getItem("c");
if(!u||!c) location.href="index.html";

const peer=new Peer();
let conn;

peer.on("open",()=>{
  conn=peer.connect(c);
  conn.on("open",()=>conn.send({type:"join",name:u}));
});

function send(dx,jump){
  if(conn) conn.send({type:"move",dx,jump});
}
function exit(){
  sessionStorage.clear();
  location.href="index.html";
}
</script>

</body>
</html>
