<h3 id="status">Lobby</h3>

<div id="lobby">
  <button onclick="move(-1)">◀</button>
  <span id="game"></span>
  <button onclick="move(1)">▶</button>
  <br><br>
  <button id="readyBtn" onclick="toggleReady()">READY</button>
</div>

<div id="countdown" style="display:none;font-size:48px;"></div>

<script>
const peer=new Peer();
let conn;
let ready=false;
const games=["Stickman Tag","Dot Chase"];

peer.on("open",()=>{
  conn=peer.connect(c);
  conn.on("data",d=>{
    if(d.type==="lobby"){
      game.textContent=games[d.selectedGame];
    }
    if(d.type==="countdown"){
      lobby.style.display="none";
      countdown.style.display="block";
      countdown.textContent=d.value;
    }
    if(d.type==="start"){
      countdown.style.display="none";
      status.textContent="Game Started";
    }
  });
});

function toggleReady(){
  ready=!ready;
  readyBtn.textContent=ready?"NOT READY":"READY";
  conn.send({type:"ready",value:ready});
}

function move(dir){
  conn.send({type:"browse",dir});
}
</script>
